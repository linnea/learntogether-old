/* Learn Together minified JS file */var app=angular.module("AppConstants",[]);app.constant("UserRoles",{userRoles:{admin:300,leader:200,user:100}});var dynamicInjector=angular.module("DynamicStaticFileInjector",[]),userModelApp=angular.module("LmsUserModel",[]);userModelApp.service("UserModelManager",["UserModelService","$q","$log",function(a,b,c){"use strict";function d(a){return{messageCode:"NOT_AUTHENTICATED",message:"Could not authenticate the user",causeBy:a}}function e(){f||(f=a.getUserAuthorization().then(function(a){var b=a.data.data.user;return g.isLoaded=!0,g.firstName=b.firstName,g.lastName=b.lastName,g.isApproved=b.isApproved,g.isAdmin=b.isAdmin,g.email=b.email,g.role=b.role,g},function(){return c.error("Could not authenticate the user because :"+JSON.stringify(cause)),g.isLoaded=!0,g.failureCause=d(cause),b.reject(g.failureCause)}))}var f,g={isLoaded:!1,isApproved:!1,isAdmin:!1,firstName:null,lastName:null,email:null,role:null};return g.getRoles=function(){return g.isAuthenticated?g.role:void 0},g.hasRole=function(a){if(angular.isArray(g.role)){if(_.indexOf(g.role,a)>=0)return!0}else if(angular.equals(g.role,a))return!0;return!1},g.hasAuthorization=function(a){var b=!1;return angular.isArray(g.role)?g.role.forEach(function(c){c>=a&&(b=!0)}):g.role>=a&&(b=!0),b},g.isUserSuperUser=function(){return g.hasRole(300)},g.whenInitialized=function(){return f},e(),g}]);var userModelApp=angular.module("LmsUserModel");userModelApp.service("UserModelService",["$q","$http",function(a,b){var c,d=a.defer();return c={getUserAuthorization:function(){var a=b.get("/api/auth/current");return a.then(function(a){d.resolve(a)},function(a){d.reject(a)}),d.promise}}}]);var userAuthorizationApp=angular.module("LmsAuthorizationModule",[]);userAuthorizationApp.directive("lmsShowForRole",["UserModelManager",function(a){function b(b){var c=!1;return angular.isArray(b)?roleList.forEach(function(b){a.hasAuthorization(b)&&(c=!0)}):b&&a.hasAuthorization(b)&&(c=!0),c}return{transclude:"true",restrict:"A",scope:{lmsVisibleToRole:"="},link:function(c,d){c.$watch("lmsVisibleToRole",function(c){a.whenInitialized().then(function(){d&&(b(c)?(d.removeClass("hidden"),d.addClass(300===a.role?"adminDiv":200===a.role?"leaderDiv":"userDiv")):d.addClass("hidden"))},function(){})})}}}]);var userProfileModule=angular.module("UserProfile",["AppConstants"]);userProfileModule.controller("UserProfileController",["$scope","UserProfileManager","UserRoles",function(a,b,c){a.manager=b,a.userRoles=c.userRoles,a.getUserId=function(){a.manager.getUserId()}}]);var userProfileModule=angular.module("UserProfile");userProfileModule.factory("UserProfileManager",["UserProfileService",function(a){var b;return b={userId:null,getUserId:function(){var b=this;a.getUserId().then(function(a){b.userId=a.data.data.user.email},function(a,c){b.userId="Error: "+c})}}}]);var userProfileModule=angular.module("UserProfile");userProfileModule.service("UserProfileService",["$q","$http",function(a,b){var c,d=a.defer();return c={getUserId:function(){var a=b.get("/api/auth/current");return a.then(function(a){d.resolve(a)},function(a){d.reject(a.status)}),d.promise}}}]);var app=angular.module("LearnTogetherMainApp",["ngRoute","mainRoutes","UserProfile","LmsUserModel","LmsAuthorizationModule"]);angular.module("mainRoutes",[]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/user-profile",{templateUrl:"/static/private/apps/main/views/UserProfile.html",controller:"UserProfileController"}),b.html5Mode(!0)}]);